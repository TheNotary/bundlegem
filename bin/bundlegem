#!/usr/bin/env ruby

# Exit cleanly from an early interrupt
Signal.trap("INT") { exit 1 }

require 'bundler'
require 'bundlegem'

# require 'bundlergem/friendly_errors'

require 'bundlegem/cli'
# Bundlegem::CLI.start(ARGV, :debug => true)

require 'bundlegem/cli/gem'
# binding.pry # hardcode options, name and self...

if ARGV.length < 2
  puts "error: you need to specify a gemname at least"
  exit 1
end

options = {"bin"=>false, "ext"=>false, :coc=> false}
name = ARGV[1] # gem name

if ARGV.length > 2
  if ARGV[2] != "-t"
    puts "you can ONLY use -t as an argument cause I'm quite busy and should be doing something else right now!"
    exit 1
  end
  
  options.merge!({"template" => ARGV[3]})
end

# self.class == Bundlegem::CLI
Bundlegem::CLI::Gem.new(options, name, self).run



